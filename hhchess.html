<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>中国象棋 · 人人对战</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&family=Ma+Shan+Zheng&family=Long+Cang&display=swap"
        rel="stylesheet">

    <script src="base.js"></script>
    <script src="moveGenerator.js"></script>
    <script src="evaluation.js"></script>
    <script src="searchEngine.js"></script>
    <script src="UI.js"></script>
</head>

<body>
    <div class="app">
        <div class="app-header">
            <div class="app-title">中国象棋 · 人人对战</div>
            <div class="app-badge hint"><a href="index.html" style="text-decoration:none;color:inherit">← 返回菜单</a></div>
        </div>

        <div class="board-wrap">
            <div class="board" id="board" aria-label="棋盘"></div>
        </div>

        <div class="op" role="group" aria-label="对局设置">
            <span class="hint">先手：</span>
            <input type="radio" name="side" value="red" id="side_red" checked>
            <label for="side_red">红</label>
            <input type="radio" name="side" value="black" id="side_black">
            <label for="side_black">黑</label>

            <button id="btn" class="btn btn-primary">开始对弈</button>
            <button id="btn-undo" class="btn">悔棋</button>
            <span class="hint">提示：点击棋子 → 再点目标格</span>
        </div>
    </div>

    <script>
        const ui = new ChineseChessUI('board');

        function start() {
            // 判断先手
            const sideEls = document.getElementsByName('side');
            let sideToMove = 1; // 默认红先
            for (let i = 0; i < sideEls.length; i++) {
                if (sideEls[i].checked) {
                    sideToMove = sideEls[i].value === 'red' ? 1 : 0;
                    break;
                }
            }

            // 人人对战 → machineSide = -1
            ui.setCustomStart(BOARD, sideToMove, -1, 3);
        }

        document.getElementById('btn').addEventListener('click', start);
       document.getElementById("btn-undo").onclick = () => toastNoUndo();


    </script>
</body>

</html>